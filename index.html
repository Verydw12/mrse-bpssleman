<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIMRIS BPS SLEMAN - Enhanced</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 3px solid #e9ecef;
        }

        .nav-tab {
            flex: 1;
            padding: 20px;
            background: none;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-tab:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: white;
            color: #3498db;
            box-shadow: 0 -3px 0 #3498db;
        }

        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.5s ease-in;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .charts-container {
    display: flex;
    flex-wrap: wrap;   /* agar bisa turun ke bawah */
    gap: 30px;
    margin-bottom: 30px;
}

/* Default (HP & Tablet) → tampilan menurun (1 kolom) */
.chart-card {
    flex: 1 1 100%;   /* penuh lebar */
}

/* Laptop & Desktop (>= 992px) → tampil mendatar */
@media (min-width: 992px) {
    .chart-card {
        flex: 1 1 calc(33.333% - 30px);  /* 3 kolom */
    }
}

/* Jika mau 2 kolom di tablet landscape (>= 768px) */
@media (min-width: 768px) and (max-width: 991px) {
    .chart-card {
        flex: 1 1 calc(50% - 30px);  /* 2 kolom */
    }
}

        .chart-filter {
            margin-bottom: 15px;
            text-align: center;
        }

        .filter-select {
            padding: 8px 15px;
            border: 2px solid #e9ecef;
            border-radius: 20px;
            font-size: 0.9rem;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            max-width: 200px;
        }

        .filter-select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.1);
        }

        .chart-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            max-width: 600px;
            margin: 0 auto;
            width: 100%;
        }

        .chart-card:hover {
            transform: translateY(-5px);
        }

        .chart-card h3 {
            text-align: center;
            margin-bottom: 20px;
            color: #2c3e50;
            font-size: 1.3rem;
        }

        .chart-container {
            position: relative;
            height: 350px;
        }

        .table-container {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
        }

        .risk-table, .mitigation-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    min-width: 1000px; /* biar tidak sempit di layar kecil */
}

.risk-table th, .mitigation-table th {
    background: linear-gradient(135deg, #3498db, #2980b9);
    color: white;
    padding: 15px;
    text-align: left;
    font-weight: 600;
    white-space: wrap;
}

.risk-table td, .mitigation-table td {
    padding: 15px;
    border-bottom: 1px solid #e9ecef;
    vertical-align: top;
    transition: background 0.3s ease;
}

.risk-table tr:hover, .mitigation-table tr:hover {
    background: #d4e8f3;
}

/* Lebarkan kolom strategi */
.risk-table th:nth-child(8),
.risk-table td:nth-child(8),
.mitigation-table th:nth-child(8),
.mitigation-table td:nth-child(8) {
    min-width: 500px;   /* lebih lebar */
    max-width: 600px;   /* batas maksimal */
    white-space: normal; /* teks boleh turun ke bawah */
    word-wrap: break-word;
}

        .risk-level {
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        .risk-level.sering {
            background: #e74c3c;
            color: white;
        }

        .risk-level.kadang {
            background: #f39c12;
            color: white;
        }

        .selector-container {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .selector-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .selector-card h3 {
            margin-bottom: 15px;
            color: #2c3e50;
        }

        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        select:focus {
            outline: none;
            border-color: #3498db;
        }

        .filter-container {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 20px;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .filter-container label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .filter-container .filter-select {
            width: 100%;
            max-width: none;
        }

        @media (max-width: 768px) {
            .charts-container,
            .selector-container,
            .filter-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .nav-tab {
                font-size: 0.9rem;
                padding: 15px 10px;
            }

            .container {
                margin: 10px;
                border-radius: 15px;
            }

            .header {
                padding: 20px 15px;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .tab-content {
                padding: 20px 15px;
            }

            .chart-card, .selector-card {
                padding: 20px 15px;
                max-width: 100%;
            }

            .chart-container {
                height: 300px;
            }
        }

        @media (max-width: 1024px) and (min-width: 769px) {
            .selector-container,
            .filter-container {
                grid-template-columns: 1fr 1fr;
            }
        }

        .strategi-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
    padding: 0;
    margin: 0;
    list-style: none;
}
.strategi-list li {
    background: #f8f9fa;
    border-radius: 10px;
    border-left: 4px solid #3498db;
    padding: 14px 18px;
    margin: 0;
    box-shadow: 0 2px 8px rgba(52,152,219,0.07);
    font-size: 0.97rem;
    line-height: 1.5;
    word-break: break-word;
}

.risk-table th:nth-child(5),
.risk-table td:nth-child(5) {
    width: 250px !important;
    min-width: 250px !important;
    max-width: 350px;
    white-space: normal;
    word-break: break-word;
}

.risk-table th:nth-child(6),
.risk-table td:nth-child(6) {
    width: 100px !important;
    min-width: 100px !important;
    max-width: 140px;
    white-space: normal;
    word-break: break-word;
}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Dashboard Manajemen Risiko SE2026</h1>
            <p>Sistem Monitoring dan Analisis Risiko - BPS Sleman</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('table')">
                Tabel Risiko
            </button>
            <button class="nav-tab" onclick="showTab('mitigasi')">
                Mitigasi Risiko
            </button>
            <button class="nav-tab" onclick="showTab('charts')">
                Grafik Risiko
            </button>
        </div>

        <!-- Tab 1: Tabel Risiko -->
        <div id="table" class="tab-content active">
            <div class="filter-container">
    <div>
        <label>Filter Tahap:</label>
        <select id="tableFilterTahap" class="filter-select" onchange="updateKegiatanFilter()">
            <option value="">Semua Tahapan</option>
            <!-- Opsi tahapan akan diisi dinamis -->
        </select>
    </div>
    <div>
        <label>Filter Kegiatan:</label>
        <select id="tableFilterKegiatan" class="filter-select" onchange="updateTable()">
            <option value="">Semua Kegiatan</option>
            <!-- Opsi kegiatan akan diisi dinamis -->
        </select>
    </div>
    <div>
        <label>Filter Kemungkinan:</label>
        <select id="tableFilterKemungkinan" class="filter-select" onchange="updateTable()">
            <option value="">Semua Kemungkinan</option>
            <option value="Sering Terjadi">Sering Terjadi</option>
            <option value="Kadang Terjadi">Kadang Terjadi</option>
            <option value="Sangat Sering Terjadi">Sangat Sering Terjadi</option>
        </select>
    </div>
    <div>
        <label>Filter Dampak:</label>
        <select id="tableFilterDampak" class="filter-select" onchange="updateTable()">
            <option value="">Semua Dampak</option>
            <option value="Signifikan">Signifikan</option>
            <option value="Sangat Signifikan">Sangat Signifikan</option>
            <option value="Moderat">Moderat</option>
        </select>
    </div>
</div>
            <div class="table-container">
                <table class="risk-table">
                    <thead>
                        <tr>
                            <th style="width: 40px;">No</th>
                            <th style="width: 80px;">Tahap</th>
                            <th style="width: 100px;">Kegiatan</th>
                            <th style="width: 100px;">Sub Kegiatan</th>
                            <th style="width: 200px;">Risiko</th>
                            <th style="width: 140px;">Kemungkinan</th>
                            <th style="width: 100px;">Dampak</th>
                            <th style="width: 350px;">Strategi</th>
                            <th style="width: 120px;">PIC</th>
                            <th style="width: 100px;">Lokasi</th>
                        </tr>
                    </thead>
                    <tbody id="riskTableBody">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Tab 2: Mitigasi Risiko -->
        <div id="mitigasi" class="tab-content">
            <div class="selector-container">
                <div class="selector-card">
                    <h3>Pilih Tahapan</h3>
                    <select id="tahapSelect" onchange="updateKegiatan()">
                        <option value="">-- Pilih Tahapan --</option>
                        <option value="Persiapan SE2026">Persiapan SE2026</option>
                    </select>
                </div>
                <div class="selector-card">
                    <h3>Pilih Kegiatan</h3>
                    <select id="kegiatanSelect" onchange="updateRisiko()">
                        <option value="">-- Pilih Kegiatan --</option>
                    </select>
                </div>
                <div class="selector-card">
                    <h3>Pilih Risiko</h3>
                    <select id="risikoSelect" onchange="showMitigasiDetail()">
                        <option value="">-- Pilih Risiko --</option>
                    </select>
                </div>
            </div>
            <div id="mitigasiResult" style="display: none;">
                <div class="table-container">
                    <table class="mitigation-table">
                        <thead>
                            <tr>
                                <th style="width: 40px;">No</th>
                                <th style="width: 150px;">PIC</th>
                                <th style="width: 150px;">Intervensi Pemda/Stakeholder</th>
                                <th style="width: 150px;">Lokasi</th>
                                <th style="width: 350px;">Strategi Mitigasi</th>
                            </tr>
                        </thead>
                        <tbody id="mitigasiTableBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Tab 3: Grafik Risiko -->
        <div id="charts" class="tab-content">
            <div class="charts-container">
                <div class="chart-card">
                    <h3>Distribusi Tingkat Kemungkinan</h3>
                    <div class="chart-filter">
                        <select id="kemungkinanFilter" class="filter-select" onchange="updateKemungkinanChart()">
                            <option value="">Semua Tahapan</option>
                            <option value="Persiapan SE2026">Persiapan</option>
                            <option value="Pelaksanaan SE2026">Pelaksanaan</option>
                            <option value="Pengolahan SE2026">Pengolahan</option>
                            <option value="Diseminasi SE2026">Diseminasi</option>
                        </select>
                    </div>
                    <div class="chart-container">
                        <canvas id="kemungkinanChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <h3>Distribusi Tingkat Dampak</h3>
                    <div class="chart-filter">
                        <select id="dampakFilter" class="filter-select" onchange="updateDampakChart()">
                            <option value="">Semua Tahapan</option>
                            <option value="Persiapan SE2026">Persiapan</option>
                            <option value="Pelaksanaan SE2026">Pelaksanaan</option>
                            <option value="Pengolahan SE2026">Pengolahan</option>
                            <option value="Diseminasi SE2026">Diseminasi</option>
                        </select>
                    </div>
                    <div class="chart-container">
                        <canvas id="dampakChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <h3>Kombinasi Kemungkinan & Dampak</h3>
                    <div class="chart-filter">
                        <select id="kombinasiFilter" class="filter-select" onchange="updateKombinasiChart()">
                            <option value="">Semua Tahapan</option>
                            <option value="Persiapan SE2026">Persiapan</option>
                            <option value="Pelaksanaan SE2026">Pelaksanaan</option>
                            <option value="Pengolahan SE2026">Pengolahan</option>
                            <option value="Diseminasi SE2026">Diseminasi</option>
                        </select>
                    </div>
                    <div class="chart-container">
                        <canvas id="kombinasiChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data risiko berdasarkan tabel yang diberikan
const riskData = [
  {
    tahap: "Persiapan SE2026",
    kegiatan: "Publisitas SE2026",
    subKegiatan: "Pemda",
    risiko: "Pihak Pemda kurang mendukung dalam kegiatan SE2026",
    kemungkinan: "Sering Terjadi",
    dampak: "Signifikan",
    strategi: "1. Meminta video dukungan SE2026 dari kepala daerah dan instansi terkait 2. Meminta kepala daerah membuat surat edaran kepada pengusaha dan masyarakat mengenai kegiatan SE2026",
    pic: "Bidang Administrasi, Humas dan Manajemen Resiko",
    intervensi: "Bupati, Wakil Bupati, Kepala Dinas Terkait",
    lokasi: "Pemda Sleman"
  },
  {
    tahap: "Persiapan SE2026",
    kegiatan: "Publisitas SE2026",
    subKegiatan: "Perusahaan/ Usaha",
    risiko: "Pihak Usaha kurang perduli dengan kegiatan SE2026",
    kemungkinan: "Sering Terjadi",
    dampak: "Signifikan",
    strategi: "1. Testimosi dukungan SE dari usaha penyedia barang jasa yang dipakai oleh BPS Sleman 2. Pembuatan leaflet SE2026 dan diberikan kepada perusahaan UMB terutama untuk responden rutin",
    pic: "Bidang Administrasi, Humas dan Manajemen Resiko",
    intervensi: "Dinas/Instansi Terkait, Asosiasi",
    lokasi: "Perusahaan/usaha di seluruh wilayah Sleman"
  },
  {
    tahap: "Persiapan SE2026",
    kegiatan: "Publisitas SE2026",
    subKegiatan: "Masyarakat Umum",
    risiko: "Pihak Masyarakat kurang perduli dengan kegiatan SE2026",
    kemungkinan: "Sering Terjadi",
    dampak: "Signifikan",
    strategi: "1. Sosialisasi melalui media radio/televisi dan media sosial 2. Meminta dukungan dari dinas komunikasi dan informatika untuk membantu publisitas SE2026 ke masyarakat",
    pic: "Bidang Administrasi, Humas dan Manajemen Resiko",
    intervensi: "Dinas/Instansi Terkait, Asosiasi, Kepala Wilayah",
    lokasi: "Kabupaten Sleman"
  },
    {
    tahap: "Persiapan SE2026",
    kegiatan: "Rekrutmen Petugas SE2026",
    subKegiatan: "Kebutuhan Petugas",
    risiko: "Kesulitan dalam memenuhi kebutuhan mitra yang banyak",
    kemungkinan: "Kadang Terjadi",
    dampak: "Signifikan",
    strategi: "1. Mensosialisasikan rekrutmen sampai ke tingkat Desa/Kalurahan 2. Membuat pengumuman open rekrutmen di website dan medsos resmi BPS Sleman",
    pic: "Bidang Teknis Pendataan dan Manajemen Lapangan",
    intervensi: "Kepala Wilayah",
    lokasi: "Gamping, Mlati, Depok, Ngaglik, Sleman"
  },
  {
    tahap: "Persiapan SE2026",
    kegiatan: "Rekrutmen Petugas SE2026",
    subKegiatan: "Penggunaan Mitra Kepka dalam SOBAT",
    risiko: "Penggunaan tenaga mitra KEPKA dari SOBAT sering terkendala oleh jeda waktu yang lama antara rekrutmen dengan pelaksanaan kegiatan",
    kemungkinan: "Sangat Sering Terjadi",
    dampak: "Sangat Signifikan",
    strategi: "1. Jika terjadi kekurangan mitra dari SOBAT akan dilakukan rekrutmen tambahan menjelang pelaksanaan SE2026 (terbuka/tertutup)",
    pic: "Bidang Teknis Pendataan dan Manajemen Lapangan",
    intervensi: "Kepala Wilayah",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Persiapan SE2026",
    kegiatan: "Rekrutmen Petugas SE2026",
    subKegiatan: "Pengunduran diri calon petugas",
    risiko: "Mitra mengundurkan diri sebelum pelaksanaan pelatihan",
    kemungkinan: "Sering Terjadi",
    dampak: "Signifikan",
    strategi: "1. Menyiapkan mitra cadangan dengan alokasi 10 persen",
    pic: "Bidang Teknis Pendataan dan Manajemen Lapangan",
    intervensi: "-",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Persiapan SE2026",
    kegiatan: "Pelatihan Petugas SE2026",
    subKegiatan: "Kualitas Hasil Pelatihan Petugas SE2026",
    risiko: "Kurangnya kualitas mitra",
    kemungkinan: "Kadang Terjadi",
    dampak: "Signifikan",
    strategi: "1. Seleksi petugas mitra dilakukan melalui tahapan wawancara untuk memastikan petugas yang dipakai adalah petugas yang tepat. 2. Mengutamakan petugas mitra yang sudah berpengalaman 3. Menyiapkan Langkah-langkah atau tahapan untuk PPL dan PML dari sebelum mulai lapangan, saat ke lapangan, dan setelah lapangan. 4. Memilih instruktur pelatihan petugas yang berkapasitas dan berkompeten",
    pic: "Bidang Teknis Pendataan dan Manajemen Lapangan",
    intervensi: "-",
    lokasi: "Kabupaten Sleman"
  },
    {
    tahap: "Pelaksanaan SE2026",
    kegiatan: "Pendataan Lapangan SE2026",
    subKegiatan: "Penggunaan Aplikasi CAPI",
    risiko: "Aplikasi galat saat pelaksanaan kegiatan",
    kemungkinan: "Kadang Terjadi",
    dampak: "Moderat",
    strategi: "1. Menginformasikan galat aplikasi kepada PIC Provinsi 2. Mempersiapkan strategi agar petugas tetap bisa ke lapangan ketika galat aplikasi berlangsung lama 3. Selalu update informasi tentang aplikasi terhadap petugas lapangan",
    pic: "Bidang Pengolahan, Tehnologi Informasi dan Diseminasi",
    intervensi: "-",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Pelaksanaan SE2026",
    kegiatan: "Pendataan Lapangan SE2026",
    subKegiatan: "Petugas",
    risiko: "Petugas melakukan moral hazzard",
    kemungkinan: "Kadang Terjadi",
    dampak: "Sangat Signifikan",
    strategi: "1. Dilakukan pendampingan oleh pengawas secara berkala 2. Dilakukan uji petik terhadap hasil kerja dari petugas pencacah oleh pengawas/pegawai organik 3. Pemberian sanksi yang tegas terhadap petugas yang melakukan moral hazzard",
    pic: "Bidang Teknis Pendataan dan Manajemen Lapangan",
    intervensi: "-",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Pelaksanaan SE2026",
    kegiatan: "Pendataan Lapangan SE2026",
    subKegiatan: "Petugas",
    risiko: "Petugas tidak dapat menyelesaikan pekerjaan",
    kemungkinan: "Kadang Terjadi",
    dampak: "Sangat Signifikan",
    strategi: "1. Mengalokasikan pekerjaan kepada petugas lain yang sudah menyelesaikan pekerjaannya 2. Mengganti petugas dengan petugas baru yang dilatih terlebih dahulu",
    pic: "Bidang Teknis Pendataan dan Manajemen Lapangan",
    intervensi: "-",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Pelaksanaan SE2026",
    kegiatan: "Pendataan Lapangan SE2026",
    subKegiatan: "Responden",
    risiko: "Kesulitan menemui responden",
    kemungkinan: "Sering Terjadi",
    dampak: "Signifikan",
    strategi: "1. Meminta bantuan kepada ketua wilayah setempat (Ketua RT, Ketua Paguyuban, dll) 2. Mendatangi responden di sore/malam hari atau di hari sabtu/minggu, yang kemungkinan besar responden sudah ada di rumah 3. Berusaha mendapatkan nomor kontak dari responden untuk membuat janji",
    pic: "Bidang Teknis Pendataan dan Manajemen Lapangan",
    intervensi: "Dinas/Instansi Terkait, Asosiasi, Kepala Wilayah",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Pelaksanaan SE2026",
    kegiatan: "Pendataan Lapangan SE2026",
    subKegiatan: "Responden UMB",
    risiko: "Tidak melakukan pengisian kuesioner CAWI",
    kemungkinan: "Sangat Sering Terjadi",
    dampak: "Sangat Signifikan",
    strategi: "1. Dilakukan pendataan secara langsung oleh petugas SE2026",
    pic: "Bidang Teknis Pendataan dan Manajemen Lapangan",
    intervensi: "Dinas/Instansi Terkait, Asosiasi, Kepala Wilayah",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Pelaksanaan SE2026",
    kegiatan: "Pendataan Lapangan SE2026",
    subKegiatan: "Perumahan Elite",
    risiko: "Kesulitan menemui responden di wilayah perumahan Elite",
    kemungkinan: "Sering Terjadi",
    dampak: "Signifikan",
    strategi: "1. Meminta bantuan dari ketua paguyuban perumahan elit untuk menginfokan kegiatan pencacahan 2. Meminta bantuan pada penguasa wilayah(Ketua RT, Kepala Dusun) untuk membantu petugas memperoleh izin masuk ke perumahan elit 3. Meminta Satpam untuk mendampingi petugas saat melakukan pendataan 4. Jika memungkinkan disediakan honor penunjuk jalan",
    pic: "Bidang Teknis Pendataan dan Manajemen Lapangan",
    intervensi: "Kepala Wilayah, Ketua Paguyuban",
    lokasi: "Gamping, Mlati, Depok, Ngaglik, Sleman"
  },
  {
    tahap: "Pelaksanaan SE2026",
    kegiatan: "Pendataan Lapangan SE2026",
    subKegiatan: "Apartemen",
    risiko: "Kesulitan menemui responden di wilayah apartemen",
    kemungkinan: "Sering Terjadi",
    dampak: "Signifikan",
    strategi: "1. Meminta bantuan dari pengelola apartemen untuk menginfokan kegiatan pencacahan 2. Mengadakan sosialisasi bagi responden di apartemen via WA (gabung di WA penghuni) 3. Mendatangi apartemen di hari sabtu/minggu untuk melakukan kegiatan pencacahan 4. Meminta satpam apartemen untuk mendampingi petugas dalam melakukan pendataan 5. Jika memungkinkan disediakan honor penunjuk jalan.",
    pic: "Bidang Teknis Pendataan dan Manajemen Lapangan",
    intervensi: "Kepala Wilayah, Pengelola Apartement",
    lokasi: "Mlati, Depok, Ngaglik"
  },
  {
    tahap: "Pelaksanaan SE2026",
    kegiatan: "Pendataan Lapangan SE2026",
    subKegiatan: "Non Respon",
    risiko: "Terdapat responden yang tidak bisa ditemui sampai akhir pencacahan",
    kemungkinan: "Sering Terjadi",
    dampak: "Signifikan",
    strategi: "1. Mendatangi lagi responden bersama pengawas 2. Membuat Berita Acara Non Respon",
    pic: "Bidang Teknis Pendataan dan Manajemen Lapangan",
    intervensi: "Dinas/Instansi Terkait, Asosiasi, Kepala Wilayah",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Pelaksanaan SE2026",
    kegiatan: "Pendataan Lapangan SE2026",
    subKegiatan: "Non Respon",
    risiko: "Terdapat responden yang menolak",
    kemungkinan: "Sering Terjadi",
    dampak: "Signifikan",
    strategi: "1. Mendatangi lagi responden bersama pengawas dan supervisi dari Kabupaten/Provinsi 2. Membuat Berita Acara Non Respon",
    pic: "Bidang Teknis Pendataan dan Manajemen Lapangan",
    intervensi: "Dinas/Instansi Terkait, Asosiasi, Kepala Wilayah",
    lokasi: "Kabupaten Sleman"
  },
    {
    tahap: "Pelaksanaan SE2026",
    kegiatan: "Manajemen Kualitas Data (Pencegahan/ Deteksi)",
    subKegiatan: "Akurasi Data",
    risiko: "Kurangnya probing petugas saat melakukan wawancara terhadap responden",
    kemungkinan: "Kadang Terjadi",
    dampak: "Signifikan",
    strategi: "1. Memberitahu petugas rincian-rincian tertentu yang perlu probing lebih lanjut dan mendalam 2. Membuat rincian yang harus diikuti oleh probing, supaya hasil wawancaranya lebih berkualitas",
    pic: "Bidang Analisis dan Kualitas Data",
    intervensi: "-",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Pelaksanaan SE2026",
    kegiatan: "Manajemen Kualitas Data (Pencegahan/ Deteksi)",
    subKegiatan: "Kelengkapan Data",
    risiko: "Terdapat usaha yang terlewat cacah atau ganda cacah",
    kemungkinan: "Sering Terjadi",
    dampak: "Sangat Signifikan",
    strategi: "1. Melakukan pendampingan awal saat mulai mencacah. 2. Mengadakan Uji Petik untuk wilayah-wilayah yang dicurigai akan terjadi terlewat cacah.",
    pic: "Bidang Analisis dan Kualitas Data",
    intervensi: "-",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Pelaksanaan SE2026",
    kegiatan: "Manajemen Kualitas Data (Pencegahan/ Deteksi)",
    subKegiatan: "Konsistensi",
    risiko: "Terdapat isian yang tidak konsisten antar pertanyaan",
    kemungkinan: "Sering Terjadi",
    dampak: "Sangat Signifikan",
    strategi: "1. Pengawas melakukan pemeriksaan dengan lebih teliti 2. Koseka melakukan pemeriksaan ulang terhadap isian dokumen secara sampel",
    pic: "Bidang Analisis dan Kualitas Data",
    intervensi: "-",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Pelaksanaan SE2026",
    kegiatan: "Manajemen Kualitas Data (Pencegahan/ Deteksi)",
    subKegiatan: "Pencegahan",
    risiko: "Petugas membuat kesalahan sampai akhir pendataan",
    kemungkinan: "Sering Terjadi",
    dampak: "Sangat Signifikan",
    strategi: "1. Monitoring Kualitas dilaksanakan pada masa awal pendataan",
    pic: "Bidang Analisis dan Kualitas Data",
    intervensi: "-",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Pelaksanaan SE2026",
    kegiatan: "Manajemen Kualitas Data (Pencegahan/ Deteksi)",
    subKegiatan: "Deteksi",
    risiko: "Petugas terdeteksi berbuat kesalahan dalam pendataan",
    kemungkinan: "Kadang Terjadi",
    dampak: "Sangat Signifikan",
    strategi: "1. Petugas diminta untuk memperbaiki kesalahan pada semua wilayah yang menjadi tugasnya",
    pic: "Bidang Analisis dan Kualitas Data",
    intervensi: "-",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Pelaksanaan SE2026",
    kegiatan: "Monitoring dan Evaluasi",
    subKegiatan: "Monitoring",
    risiko: "Dashboard Monitoring dari pusat kurang jelas/detail",
    kemungkinan: "Sering Terjadi",
    dampak: "Sangat Signifikan",
    strategi: "1. Monitoring dibuat lebih rinci dan lebih detail",
    pic: "Bidang Teknis Pendataan dan Manajemen Lapangan",
    intervensi: "-",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Pelaksanaan SE2026",
    kegiatan: "Monitoring dan Evaluasi",
    subKegiatan: "Evaluasi",
    risiko: "Petugas tidak dapat menepati jadwal pendataan",
    kemungkinan: "Sering Terjadi",
    dampak: "Sangat Signifikan",
    strategi: "1. Dilaksanakan evaluasi kegiatan secara berkala",
    pic: "Bidang Teknis Pendataan dan Manajemen Lapangan",
    intervensi: "-",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Pengolahan SE2026",
    kegiatan: "Validasi",
    subKegiatan: "Validasi data",
    risiko: "Terdapat data yang harus divalidasi",
    kemungkinan: "Sering Terjadi",
    dampak: "Signifikan",
    strategi: "1. Dilakukan validasi menggunakan tools yang tersedia",
    pic: "Bidang Pengolahan, Tehnologi Informasi dan Diseminasi",
    intervensi: "-",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Pengolahan SE2026",
    kegiatan: "Anomali",
    subKegiatan: "Anomali Data",
    risiko: "Terdapat anomali data",
    kemungkinan: "Sering Terjadi",
    dampak: "Sangat Signifikan",
    strategi: "1. Melakukan konfirmasi kepada petugas, kemudian memperbaiki isian",
    pic: "Bidang Pengolahan, Tehnologi Informasi dan Diseminasi",
    intervensi: "-",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Diseminasi SE2026",
    kegiatan: "Publikasi",
    subKegiatan: "Publikasi Hasil SE2026",
    risiko: "Tidak adanya publikasi hasil SE2026",
    kemungkinan: "Kadang Terjadi",
    dampak: "Sangat Signifikan",
    strategi: "1. Menyusun publikasi hasil SE2026 berdasarkan data yang tersedia dan layak untuk dipublikasikan",
    pic: "Bidang Pengolahan, Tehnologi Informasi dan Diseminasi",
    intervensi: "-",
    lokasi: "Kabupaten Sleman"
  },
  {
    tahap: "Diseminasi SE2026",
    kegiatan: "Ekspose Data Hasil SE2026",
    subKegiatan: "Ekspose Data",
    risiko: "Interpretasi data yang salah oleh masyarakat dan berbeda jauh dari yang dikeluarkan BPS, termasuk Hoax dan Misinformasi",
    kemungkinan: "Sering Terjadi",
    dampak: "Sangat Signifikan",
    strategi: "1. Menyusun dan Mensosialisasikan hasil SE2026 dengan berbagai media dan dipastikan untuk menjangkau seluruh masyarakat terutama pelaku usaha. 2. Dibuatkan Peta Ekonomi Wilayah Sleman Untuk menjangkau masyarakat dan pelaku usaha",
    pic: "Bidang Pengolahan, Tehnologi Informasi dan Diseminasi",
    intervensi: "-",
    lokasi: "Kabupaten Sleman"
  }

        ];

        // Inisialisasi dashboard
        function initDashboard() {
            createCharts();
            populateTableFilters();
            populateTable();
            populateTahapSelect();
        }

        // Fungsi untuk memfilter data berdasarkan tahapan
        function getFilteredData(filterId) {
            const filter = document.getElementById(filterId).value;
            if (!filter) return riskData;
            return riskData.filter(risk => risk.tahap === filter);
        }

        // Update individual charts
        function updateKemungkinanChart() {
            createKemungkinanChart();
        }

        function updateDampakChart() {
            createDampakChart();
        }

        function updateKombinasiChart() {
            createKombinasiChart();
        }

        // Update table dengan filter
        function updateTable() {
            populateTable();
        }

        // Fungsi untuk memfilter data tabel
        function getFilteredTableData() {
            const tahapFilter = document.getElementById('tableFilterTahap').value;
            const kegiatanFilter = document.getElementById('tableFilterKegiatan').value;
            const kemungkinanFilter = document.getElementById('tableFilterKemungkinan').value;
            const dampakFilter = document.getElementById('tableFilterDampak').value;

            return riskData.filter(risk => {
                const tahapMatch = !tahapFilter || risk.tahap === tahapFilter;
                const kegiatanMatch = !kegiatanFilter || risk.kegiatan === kegiatanFilter;
                const kemungkinanMatch = !kemungkinanFilter || risk.kemungkinan === kemungkinanFilter;
                const dampakMatch = !dampakFilter || risk.dampak === dampakFilter;

                return tahapMatch && kegiatanMatch && kemungkinanMatch && dampakMatch;
            });
        }

        // Fungsi untuk menampilkan tab
        function showTab(tabName) {
            // Sembunyikan semua tab
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            const navTabs = document.querySelectorAll('.nav-tab');
            navTabs.forEach(tab => tab.classList.remove('active'));
            
            // Tampilkan tab yang dipilih
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Global variables untuk menyimpan chart instances
        let kemungkinanChartInstance = null;
        let dampakChartInstance = null;
        let kombinasiChartInstance = null;

        // Membuat semua grafik pie chart
        function createCharts() {
            createKemungkinanChart();
            createDampakChart();
            createKombinasiChart();
        }

        // Chart Kemungkinan
        function createKemungkinanChart() {
            const filteredData = getFilteredData('kemungkinanFilter');
            const kemungkinanData = {};
            
            filteredData.forEach(risk => {
                kemungkinanData[risk.kemungkinan] = (kemungkinanData[risk.kemungkinan] || 0) + 1;
            });

            if (kemungkinanChartInstance) kemungkinanChartInstance.destroy();

            const kemungkinanCtx = document.getElementById('kemungkinanChart').getContext('2d');
            kemungkinanChartInstance = new Chart(kemungkinanCtx, {
                type: 'pie',
                data: {
                    labels: Object.keys(kemungkinanData),
                    datasets: [{
                        data: Object.values(kemungkinanData),
                        backgroundColor: [
                            '#e74c3c',
                            '#f39c12',
                            '#3498db',
                            '#2ecc71'
                        ],
                        borderWidth: 3,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((context.parsed * 100) / total).toFixed(1);
                                    return `${context.label}: ${context.parsed} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Chart Dampak
        function createDampakChart() {
            const filteredData = getFilteredData('dampakFilter');
            const dampakData = {};
            
            filteredData.forEach(risk => {
                dampakData[risk.dampak] = (dampakData[risk.dampak] || 0) + 1;
            });

            if (dampakChartInstance) dampakChartInstance.destroy();

            const dampakCtx = document.getElementById('dampakChart').getContext('2d');
            dampakChartInstance = new Chart(dampakCtx, {
                type: 'pie',
                data: {
                    labels: Object.keys(dampakData),
                    datasets: [{
                        data: Object.values(dampakData),
                        backgroundColor: [
                            '#e74c3c',
                            '#f39c12',
                            '#3498db',
                            '#2ecc71'
                        ],
                        borderWidth: 3,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((context.parsed * 100) / total).toFixed(1);
                                    return `${context.label}: ${context.parsed} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Chart Kombinasi
        function createKombinasiChart() {
            const filteredData = getFilteredData('kombinasiFilter');
            const kombinasiData = {};
            
            filteredData.forEach(risk => {
                const kombinasi = getKombinasiLabel(risk.kemungkinan, risk.dampak);
                kombinasiData[kombinasi] = (kombinasiData[kombinasi] || 0) + 1;
            });

            // Destroy existing chart jika ada
            if (kombinasiChartInstance) kombinasiChartInstance.destroy();

            const kombinasiCtx = document.getElementById('kombinasiChart').getContext('2d');
            kombinasiChartInstance = new Chart(kombinasiCtx, {
                type: 'pie',
                data: {
                    labels: Object.keys(kombinasiData),
                    datasets: [{
                        data: Object.values(kombinasiData),
                        backgroundColor: [
    '#c0392b', // Sereng & Signifikan (Merah Tua)
    '#e67e22', // Sereng & Moderat (Oranye Tua)
    '#9b59b6', // Sereng & Sangat Signifikan (Ungu)
    '#f39c12', // Kadang & Signifikan (Oranye)
    '#3498db', // Kadang & Moderat (Biru)
    '#1abc9c', // Kadang & Sangat Signifikan (Hijau Tosca)
    '#2ecc71', // Sangat Sering & Signifikan (Hijau)
    '#e74c3c'  // Sangat Sering & Sangat Signifikan (Merah)
],

                        borderWidth: 3,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((context.parsed * 100) / total).toFixed(1);
                                    return `${context.label}: ${context.parsed} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Fungsi untuk mendapatkan label kombinasi
function getKombinasiLabel(kemungkinan, dampak) {
    if (kemungkinan === "Sering Terjadi" && dampak === "Signifikan") {
        return "Sering & Signifikan";
    } else if (kemungkinan === "Sering Terjadi" && dampak === "Moderat") {
        return "Sering & Moderat";
    } else if (kemungkinan === "Sering Terjadi" && dampak === "Sangat Signifikan") {
        return "Sering & Sangat Signifikan";
    } else if (kemungkinan === "Kadang Terjadi" && dampak === "Signifikan") {
        return "Kadang & Signifikan";
    } else if (kemungkinan === "Kadang Terjadi" && dampak === "Moderat") {
        return "Kadang & Moderat";
    } else if (kemungkinan === "Kadang Terjadi" && dampak === "Sangat Signifikan") {
        return "Kadang & Sangat Signifikan";
    } else if (kemungkinan === "Sangat Sering Terjadi" && dampak === "Signifikan") {
        return "Sangat Sering & Signifikan";
    } else if (kemungkinan === "Sangat Sering Terjadi" && dampak === "Sangat Signifikan") {
        return "Sangat Sering & Sangat Signifikan";
    }
}



        // Mengisi tabel risiko
        function populateTable() {
            const tableBody = document.getElementById('riskTableBody');
            const filteredData = getFilteredTableData();
            
            tableBody.innerHTML = '';
            
            if (filteredData.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="10" style="text-align: center; padding: 30px; color: #7f8c8d; font-style: italic;">
                        Tidak ada data yang sesuai dengan filter yang dipilih
                    </td>
                `;
                tableBody.appendChild(row);
                return;
            }

            filteredData.forEach((risk, index) => {
                // Pisahkan strategi berdasarkan nomor (1. 2. dst)
    let strategies = [];
    if (Array.isArray(risk.strategi)) {
        strategies = risk.strategi;
    } else if (typeof risk.strategi === 'string') {
        strategies = risk.strategi.split(/\d+\.\s?/).filter(s => s.trim());
    }
    // Gunakan ul dengan class strategi-list agar tampil seperti card
    const strategiList = strategies.length
        ? `<ul class="strategi-list">${strategies.map(s => `<li>${s.trim()}</li>`).join('')}</ul>`
        : '';

    const row = document.createElement('tr');
    row.innerHTML = `
        <td>${index + 1}</td>
        <td>${risk.tahap || ''}</td>
        <td>${risk.kegiatan || ''}</td>
        <td>${risk.subKegiatan || ''}</td>
        <td>${risk.risiko || ''}</td>
        <td><span class="risk-level ${risk.kemungkinan ? risk.kemungkinan.toLowerCase().replace(' ', '-') : ''}">${risk.kemungkinan || ''}</span></td>
        <td>${risk.dampak || ''}</td>
        <td>${strategiList}</td>
        <td>${risk.pic || ''}</td>
        <td>${risk.lokasi || ''}</td>
    `;
    tableBody.appendChild(row);
            });
        }

        // Mengisi dropdown tahap
        function populateTahapSelect() {
            const tahapSelect = document.getElementById('tahapSelect');
            const uniqueTahap = [...new Set(riskData.map(risk => risk.tahap))];
            
            tahapSelect.innerHTML = '<option value="">-- Pilih Tahapan --</option>';
            uniqueTahap.forEach(tahap => {
                const option = document.createElement('option');
                option.value = tahap;
                option.textContent = tahap;
                tahapSelect.appendChild(option);
            });
        }

        // Update dropdown kegiatan berdasarkan tahap
        function updateKegiatan() {
            const tahapSelect = document.getElementById('tahapSelect');
            const kegiatanSelect = document.getElementById('kegiatanSelect');
            const risikoSelect = document.getElementById('risikoSelect');
            const selectedTahap = tahapSelect.value;
            
            kegiatanSelect.innerHTML = '<option value="">-- Pilih Kegiatan --</option>';
            risikoSelect.innerHTML = '<option value="">-- Pilih Risiko --</option>';
            
            if (selectedTahap) {
                const filteredRisks = riskData.filter(risk => risk.tahap === selectedTahap);
                const uniqueKegiatan = [...new Set(filteredRisks.map(risk => risk.kegiatan))];
                
                uniqueKegiatan.forEach(kegiatan => {
                    const option = document.createElement('option');
                    option.value = kegiatan;
                    option.textContent = kegiatan;
                    kegiatanSelect.appendChild(option);
                });
            }
            
            document.getElementById('mitigasiResult').style.display = 'none';
        }

        // Update dropdown risiko berdasarkan tahap dan kegiatan
        function updateRisiko() {
            const tahapSelect = document.getElementById('tahapSelect');
            const kegiatanSelect = document.getElementById('kegiatanSelect');
            const risikoSelect = document.getElementById('risikoSelect');
            const selectedTahap = tahapSelect.value;
            const selectedKegiatan = kegiatanSelect.value;
            
            risikoSelect.innerHTML = '<option value="">-- Pilih Risiko --</option>';
            
            if (selectedTahap && selectedKegiatan) {
                const filteredRisks = riskData.filter(risk => 
                    risk.tahap === selectedTahap && risk.kegiatan === selectedKegiatan
                );
                
                filteredRisks.forEach((risk, index) => {
                    const option = document.createElement('option');
                    option.value = index;
                    option.dataset.tahap = selectedTahap;
                    option.dataset.kegiatan = selectedKegiatan;
                    option.textContent = risk.risiko;
                    risikoSelect.appendChild(option);
                });
            }
            
            document.getElementById('mitigasiResult').style.display = 'none';
        }

        // Menampilkan detail mitigasi dalam bentuk tabel
        function showMitigasiDetail() {
            const tahapSelect = document.getElementById('tahapSelect');
            const kegiatanSelect = document.getElementById('kegiatanSelect');
            const risikoSelect = document.getElementById('risikoSelect');
            const mitigasiResult = document.getElementById('mitigasiResult');
            const mitigasiTableBody = document.getElementById('mitigasiTableBody');
            
            const selectedTahap = tahapSelect.value;
            const selectedKegiatan = kegiatanSelect.value;
            const selectedRisikoIndex = risikoSelect.value;
            
            if (selectedTahap && selectedKegiatan && selectedRisikoIndex !== '') {
                const filteredRisks = riskData.filter(risk => 
                    risk.tahap === selectedTahap && risk.kegiatan === selectedKegiatan
                );
                const selectedRisk = filteredRisks[parseInt(selectedRisikoIndex)];
                
                mitigasiTableBody.innerHTML = '';
                
                // Split strategi berdasarkan nomor (1. 2. dst)
                const strategies = selectedRisk.strategi.split(/\d+\./).filter(s => s.trim());
                
                strategies.forEach((strategy, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td>${selectedRisk.pic}</td>
                        <td>${selectedRisk.intervensi}</td>
                        <td>${selectedRisk.lokasi}</td>
                        <td>${strategy.trim()}</td>
                    `;
                    mitigasiTableBody.appendChild(row);
                });
                
                mitigasiResult.style.display = 'block';
            } else {
                mitigasiResult.style.display = 'none';
            }
        }

        // Isi filter tahapan dan kegiatan secara dinamis
function populateTableFilters() {
    const tahapSelect = document.getElementById('tableFilterTahap');
    const kegiatanSelect = document.getElementById('tableFilterKegiatan');

    // Tahapan unik
    const uniqueTahap = [...new Set(riskData.map(risk => risk.tahap))];
    tahapSelect.innerHTML = '<option value="">Semua Tahapan</option>';
    uniqueTahap.forEach(tahap => {
        const option = document.createElement('option');
        option.value = tahap;
        option.textContent = tahap;
        tahapSelect.appendChild(option);
    });

    // Kegiatan unik (default: semua kegiatan)
    const uniqueKegiatan = [...new Set(riskData.map(risk => risk.kegiatan))];
    kegiatanSelect.innerHTML = '<option value="">Semua Kegiatan</option>';
    uniqueKegiatan.forEach(kegiatan => {
        const option = document.createElement('option');
        option.value = kegiatan;
        option.textContent = kegiatan;
        kegiatanSelect.appendChild(option);
    });
}

// Update filter kegiatan saat tahapan dipilih
function updateKegiatanFilter() {
    const tahapSelect = document.getElementById('tableFilterTahap');
    const kegiatanSelect = document.getElementById('tableFilterKegiatan');
    const selectedTahap = tahapSelect.value;

    let filteredKegiatan;
    if (selectedTahap) {
        filteredKegiatan = [...new Set(riskData.filter(risk => risk.tahap === selectedTahap).map(risk => risk.kegiatan))];
    } else {
        filteredKegiatan = [...new Set(riskData.map(risk => risk.kegiatan))];
    }

    kegiatanSelect.innerHTML = '<option value="">Semua Kegiatan</option>';
    filteredKegiatan.forEach(kegiatan => {
        const option = document.createElement('option');
        option.value = kegiatan;
        option.textContent = kegiatan;
        kegiatanSelect.appendChild(option);
    });

    updateTable();
}

// Panggil fungsi ini saat halaman dimuat
function initDashboard() {
    createCharts();
    populateTableFilters();
    populateTable();
    populateTahapSelect();
}
// Inisialisasi dashboard saat halaman dimuat
window.onload = initDashboard;
    </script>
</body>
</html>